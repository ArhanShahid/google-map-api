$(() => {

    const drawingManager = new google.maps.drawing.DrawingManager({
        drawingMode: google.maps.drawing.OverlayType.POLYLINE,
        drawingControl: true,
        drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [
                google.maps.drawing.OverlayType.POLYLINE
            ]
        },
        polylineOptions: {
            strokeColor: '#696969',
            strokeWeight: 2
        }
    });
    const directionsService = new google.maps.DirectionsService;
    const directionsDisplay = new google.maps.DirectionsRenderer({
        polylineOptions: {
            strokeColor: "red"
        }
    });
    const map = new google.maps.Map(document.getElementById('snap-to-road-map'), {
        zoom: 13,
        center: new google.maps.LatLng(24.8614622, 67.00993879999999)
    });

  
    const markers = [{
            "lat": 24.8796578,
            "lng": 67.0869286
        },
        {
            "lng": 67.0869241,
            "lat": 24.8796564
        },
        {
            "lng": 67.0868728,
            "lat": 24.8795839
        },
        {
            "lng": 67.0869185,
            "lat": 24.8794365
        },
        {
            "lng": 67.0869551,
            "lat": 24.8794114
        },
        {
            "lng": 67.0869711,
            "lat": 24.8794716
        },
        {
            "lng": 67.0870077,
            "lat": 24.8794668
        },
        {
            "lng": 67.0870064,
            "lat": 24.8794426
        },
        {
            "lng": 67.087014,
            "lat": 24.8794342
        },
        {
            "lng": 67.087019,
            "lat": 24.8794287
        },
        {
            "lng": 67.0870068,
            "lat": 24.8793878
        },
        {
            "lng": 67.0869894,
            "lat": 24.8794009
        },
        {
            "lng": 67.0869911,
            "lat": 24.8794062
        },
        {
            "lng": 67.0869912,
            "lat": 24.8794064
        },
        {
            "lng": 67.0870027,
            "lat": 24.8794702
        },
        {
            "lng": 67.0869758,
            "lat": 24.8795019
        },
        {
            "lng": 67.0869547,
            "lat": 24.8795078
        },
        {
            "lng": 67.0869526,
            "lat": 24.8795068
        },
        {
            "lng": 67.0869399,
            "lat": 24.8794511
        },
        {
            "lng": 67.0869394,
            "lat": 24.8794489
        },
        {
            "lng": 67.0869394,
            "lat": 24.8794488
        },
        {
            "lng": 67.0869394,
            "lat": 24.8794488
        },
        {
            "lng": 67.0869228,
            "lat": 24.8794288
        },
        {
            "lng": 67.0869497,
            "lat": 24.8793447
        },
        {
            "lng": 67.0869709,
            "lat": 24.8793029
        },
        {
            "lng": 67.0869538,
            "lat": 24.8793357
        },
        {
            "lng": 67.0869379,
            "lat": 24.8793664
        },
        {
            "lng": 67.0867187,
            "lat": 24.8796242
        },
        {
            "lng": 67.0867143,
            "lat": 24.879608
        },
        {
            "lng": 67.0867561,
            "lat": 24.8795935
        },
        {

            "lng": 67.0868419,
            "lat": 24.8794052
        },
        {
            "lng": 67.0868138,
            "lat": 24.879413
        },
        {
            "lng": 67.0868762,
            "lat": 24.8795328
        },
        {
            "lng": 67.0867354,
            "lat": 24.8791772
        },
        {
            "lng": 67.0867645,
            "lat": 24.8792326
        },
        {
            "lng": 67.0868452,
            "lat": 24.8791982
        },
        {
            "lng": 67.0868655,
            "lat": 24.8791783
        },
        {
            "lng": 67.0869046,
            "lat": 24.8791295
        },
        {
            "lng": 67.0869826,
            "lat": 24.8789347
        },
        {
            "lng": 67.0871026,
            "lat": 24.8789632
        },
        {
            "lng": 67.0869291,
            "lat": 24.8796562
        },
        {
            "lng": 67.0869707,
            "lat": 24.8796486
        },
        {
            "lng": 67.0869296,
            "lat": 24.8796573
        },
        {
            "lng": 67.0869041,
            "lat": 24.8796328
        },
        {
            "lng": 67.0869329,
            "lat": 24.879718
        },
        {
            "lng": 67.0869373,
            "lat": 24.87965
        },
        {
            "lng": 67.0869289,
            "lat": 24.8796573
        },
        {
            "lng": 67.0869291,
            "lat": 24.8796572
        },
        {
            "lng": 67.0869291,
            "lat": 24.8796697
        },
        {
            "lng": 67.0869284,
            "lat": 24.8796699
        },
        {
            "lng": 67.0869292,
            "lat": 24.8796695
        },
        {
            "lng": 67.0869306,
            "lat": 24.8796704
        },
        {
            "lng": 67.0869203,
            "lat": 24.8796521
        },
        {
            "lng": 67.0869186,
            "lat": 24.879576
        },
        {
            "lng": 67.0868196,
            "lat": 24.8795325
        },
        {
            "lng": 67.0868121,
            "lat": 24.8795333
        },
        {
            "lng": 67.0868275,
            "lat": 24.8795498
        },
        {
            "lng": 67.0867987,
            "lat": 24.8795549
        },
        {
            "lng": 67.0867889,
            "lat": 24.8795055
        },
        {
            "lng": 67.086795,
            "lat": 24.8795145
        },
        {
            "lng": 67.0867503,
            "lat": 24.8795067
        },
        {
            "lng": 67.0867363,
            "lat": 24.8795094
        },
        {
            "lng": 67.0868058,
            "lat": 24.8794813
        },
        {
            "lng": 67.0868208,
            "lat": 24.8794683
        },
        {
            "lng": 67.0868435,
            "lat": 24.879512
        },
        {
            "lng": 67.0868509,
            "lat": 24.8795711
        },
        {
            "lng": 67.0868569,
            "lat": 24.8795638
        },
        {
            "lng": 67.0869665,
            "lat": 24.8794998
        },
        {
            "lng": 67.0869815,
            "lat": 24.879624
        },
        {
            "lng": 67.0870169,
            "lat": 24.879675
        },
        {
            "lng": 67.0870548,
            "lat": 24.879668
        },
        {
            "lng": 67.0870755,
            "lat": 24.879692
        },
        {
            "lng": 67.0870679,
            "lat": 24.8796677
        },
        {
            "lng": 67.0870686,
            "lat": 24.8796494
        },
        {
            "lng": 67.0870753,
            "lat": 24.8796554
        },
        {
            "lng": 67.0870682,
            "lat": 24.8796391
        },
        {
            "lng": 67.0870755,
            "lat": 24.8796444
        },
        {
            "lng": 67.087062,
            "lat": 24.8796734
        },
        {
            "lng": 67.0870488,
            "lat": 24.8796921
        },
        {
            "lng": 67.0870388,
            "lat": 24.8797472
        },
        {
            "lng": 67.0870533,
            "lat": 24.8797797
        },
        {
            "lng": 67.0870891,
            "lat": 24.8795632
        },
        {
            "lng": 67.0871055,
            "lat": 24.8795894
        },
        {
            "lng": 67.0870748,
            "lat": 24.8795925
        },
        {
            "lng": 67.0870378,
            "lat": 24.8795893
        },
        {
            "lng": 67.0868727,
            "lat": 24.8795668
        },
        {
            "lng": 67.0868023,
            "lat": 24.879566
        },
        {
            "lng": 67.0867588,
            "lat": 24.8795686
        },
        {
            "lng": 67.0867521,
            "lat": 24.8795677
        },
        {
            "lng": 67.0867482,
            "lat": 24.8795786
        },
        {
            "lng": 67.0867639,
            "lat": 24.8796091
        },
        {
            "lng": 67.0867895,
            "lat": 24.8796582
        },
        {
            "lng": 67.0866731,
            "lat": 24.8799431
        },
        {
            "lng": 67.0869837,
            "lat": 24.8806076
        },
        {
            "lng": 67.0870718,
            "lat": 24.8811446
        },
        {
            "lng": 67.0864608,
            "lat": 24.8822482
        },
        {
            "lng": 67.0860271,
            "lat": 24.8830686
        },
        {
            "lng": 67.0855884,
            "lat": 24.883979
        },
        {
            "lng": 67.0853782,
            "lat": 24.8844052
        },
        {
            "lng": 67.0854404,
            "lat": 24.8845702
        },
        {
            "lng": 67.0860314,
            "lat": 24.8853278
        },
        {
            "lng": 67.0863166,
            "lat": 24.8863027
        },
        {
            "lng": 67.0867451,
            "lat": 24.8873337
        },
        {
            "lng": 67.0871444,
            "lat": 24.8877066
        },
        {
            "lng": 67.0870523,
            "lat": 24.8882932
        },
        {
            "lng": 67.0864134,
            "lat": 24.8893507
        },
        {
            "lng": 67.0857561,
            "lat": 24.8903146
        },
        {
            "lng": 67.085195,
            "lat": 24.8910338
        },
        {
            "lng": 67.084619,
            "lat": 24.8916825
        },
        {
            "lng": 67.0837376,
            "lat": 24.8920071
        },
        {
            "lng": 67.0823619,
            "lat": 24.8922886
        },
        {
            "lng": 67.0812347,
            "lat": 24.892644
        },
        {
            "lng": 67.0807097,
            "lat": 24.8935532
        },
        {
            "lng": 67.0803022,
            "lat": 24.8945304
        },
        {
            "lng": 67.0798707,
            "lat": 24.8955772
        },
        {
            "lng": 67.079345,
            "lat": 24.8964705
        },
        {
            "lng": 67.0785766,
            "lat": 24.897018
        },
        {
            "lng": 67.078433,
            "lat": 24.89707
        },
        {
            "lng": 67.0784315,
            "lat": 24.8970715
        },
        {
            "lng": 67.0783854,
            "lat": 24.8970262
        },
        {
            "lng": 67.0783759,
            "lat": 24.8970149
        },
        {
            "lng": 67.0783853,
            "lat": 24.8970212
        },
        {
            "lng": 67.0783793,
            "lat": 24.8970179
        },
        {
            "lng": 67.0783777,
            "lat": 24.8970117
        },
        {
            "lng": 67.078381,
            "lat": 24.8970102
        },
        {
            "lng": 67.0783696,
            "lat": 24.8969954
        },
        {
            "lng": 67.0783685,
            "lat": 24.8969918
        },
        {
            "lng": 67.0783508,
            "lat": 24.8969896
        },
        {
            "lng": 67.078277,
            "lat": 24.8970465
        },
        {
            "lng": 67.0778331,
            "lat": 24.8973822
        },
        {
            "lng": 67.0771661,
            "lat": 24.8978881
        },
        {
            "lng": 67.076299,
            "lat": 24.8985661
        },
        {
            "lng": 67.0753633,
            "lat": 24.8992392
        },
        {
            "lng": 67.074808,
            "lat": 24.8996914
        },
        {
            "lng": 67.0742317,
            "lat": 24.9001237
        },
        {
            "lng": 67.0731125,
            "lat": 24.9008377
        },
        {
            "lng": 67.0723435,
            "lat": 24.9013204
        },
        {
            "lng": 67.0715674,
            "lat": 24.9010111
        },
        {
            "lng": 67.0722787,
            "lat": 24.9007016
        },
        {
            "lng": 67.073185,
            "lat": 24.9011947
        },
        {
            "lng": 67.0737149,
            "lat": 24.9014863
        },
        {
            "lng": 67.0741396,
            "lat": 24.9017928
        },
        {
            "lng": 67.0742309,
            "lat": 24.9021809
        },
        {
            "lng": 67.0737242,
            "lat": 24.9027613
        },
        {
            "lng": 67.0732678,
            "lat": 24.9032658
        },
        {
            "lng": 67.072951,
            "lat": 24.9035353
        },
        {
            "lng": 67.0723979,
            "lat": 24.9032081
        },
        {
            "lng": 67.0718257,
            "lat": 24.9031456
        },
        {
            "lng": 67.0709102,
            "lat": 24.9036805
        },
        {
            "lng": 67.0704141,
            "lat": 24.9040223
        },
        {
            "lng": 67.0702135,
            "lat": 24.9046674
        },
        {
            "lng": 67.0699598,
            "lat": 24.9052039
        },
        {
            "lng": 67.0697233,
            "lat": 24.9055842
        },
        {
            "lng": 67.0696243,
            "lat": 24.9055695
        },
        {
            "lng": 67.0694264,
            "lat": 24.905588
        },
        {
            "lng": 67.0694177,
            "lat": 24.9056422
        },
        {
            "lng": 67.0694913,
            "lat": 24.9056627
        },
        {
            "lng": 67.0694988,
            "lat": 24.905658
        },
        {
            "lng": 67.0695387,
            "lat": 24.9057037
        },
        {
            "lng": 67.0695948,
            "lat": 24.9057178
        },
        {
            "lng": 67.0696981,
            "lat": 24.9054725
        },
        {
            "lng": 67.0696529,
            "lat": 24.9054459
        },
        {
            "lng": 67.0696748,
            "lat": 24.9054219
        },
        {
            "lng": 67.0697138,
            "lat": 24.9054162
        },
        {
            "lng": 67.0697212,
            "lat": 24.9053809
        },
        {
            "lng": 67.069732,
            "lat": 24.9053726
        },
        {
            "lng": 67.0697313,
            "lat": 24.9053632
        },
        {
            "lng": 67.0697313,
            "lat": 24.9053632
        },
        {
            "lng": 67.0697324,
            "lat": 24.9053514
        },
        {
            "lng": 67.0697135,
            "lat": 24.9053597
        },
        {
            "lng": 67.0697134,
            "lat": 24.9053526
        },
        {
            "lng": 67.0697164,
            "lat": 24.9053438
        }
    ];

    drawingManager.setMap(map);
    // runSnapToRoad([]);

    directionsDisplay.setMap(map);
});